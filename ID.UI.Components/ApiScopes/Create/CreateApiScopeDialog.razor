@using MudBlazor

@inherits CreateApiScopeDialogModel

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Create" Class="mr-3 mb-n1" />
            Форма добавления области доступа
        </MudText>
    </TitleContent>

    <DialogContent>
        <MudContainer MaxWidth="MaxWidth.Medium">
            <MudTabs Elevation="1" Rounded="true" PanelClass="pa-6">
                <MudTabPanel>
                    <ChildContent>
                        <MudText>Custom tab content only</MudText>
                    </ChildContent>
                    <TabContent>
                        Item One
                    </TabContent>
                </MudTabPanel>
                <MudTabPanel>
                    <ChildContent>
                        <MudText>Both custom tab and wrapper content</MudText>
                    </ChildContent>
                    <TabWrapperContent>
                        <MudTooltip Text="ToolTip Two">
                            @context
                        </MudTooltip>
                    </TabWrapperContent>
                    <TabContent>
                        <MudText Typo="Typo.h6">Item Two</MudText>
                    </TabContent>
                </MudTabPanel>
                <MudTabPanel Text="Item Three">
                    <ChildContent>
                        <MudText>Custom wrapper content only</MudText>
                    </ChildContent>
                    <TabWrapperContent>
                        <MudTooltip Text="ToolTip Three">
                            @context
                        </MudTooltip>
                    </TabWrapperContent>
                </MudTabPanel>
            </MudTabs>

            <MudForm @ref="ModelForm" Model="Model">
                <MudStack Spacing="2">
                    <MudStack Spacing="3">
                        <MudTextField @bind-Value="@Model.Name"
                                      Label="Наименование"
                                      AutoFocus="true"
                                      For="() => Model.Name"
                                      Validation="Model.Validator.IsValid"
                                      T="string"
                                      InputMode="InputMode.text" />

                        <MudTextField @bind-Value="@Model.DisplayName"
                                      Label="Наименование (отображение)" />

                        <MudTextField @bind-Value="@Model.Description"
                                      Label="Описание" />
                    </MudStack>

                    <MudStack Spacing="3">
                        <MudItem>
                            <MudText Typo="Typo.body1">Область обязательна?</MudText>

                            <MudRadioGroup @bind-SelectedOption="Model.Required">
                                <MudRadio Color="Color.Primary" Option="@(true)">Да</MudRadio>
                                <MudRadio Color="Color.Primary" Option="@(false)">Нет</MudRadio>
                            </MudRadioGroup>
                        </MudItem>

                        <MudItem>
                            <MudText Typo="Typo.body1">Показать в документе Discovery?</MudText>

                            <MudRadioGroup @bind-SelectedOption="Model.ShowInDiscoveryDocument">
                                <MudRadio Color="Color.Primary" Option="@(true)">Да</MudRadio>
                                <MudRadio Color="Color.Primary" Option="@(false)">Нет</MudRadio>
                            </MudRadioGroup>
                        </MudItem>

                        <MudItem>
                            <MudText Typo="Typo.body1">Подчеркивать?</MudText>

                            <MudRadioGroup @bind-SelectedOption="Model.Emphasize">
                                <MudRadio Color="Color.Primary" Option="@(true)">Да</MudRadio>
                                <MudRadio Color="Color.Primary" Option="@(false)">Нет</MudRadio>
                            </MudRadioGroup>
                        </MudItem>
                    </MudStack>

                    <MudStack Spacing="2">

                        @if (Model.UserClaims.Any())
                        {
                            <MudText Typo="Typo.body1">Утверждения области доступа</MudText>
                            @foreach (var userClaim in Model.UserClaims)
                            {
                                <MudText Typo="Typo.caption">@userClaim</MudText>
                            }
                        }
                        else
                        {
                            <MudText Typo="Typo.body1">Добавьте утверждения для области доступа</MudText>
                        }

                        <MudTextField @bind-Value="@claim"
                                      Label="Утверждение" />

                        <MudButton Color="Color.Primary" Variant="Variant.Filled" Disabled="string.IsNullOrEmpty(claim)" OnClick="AddUserClaim">Добавить</MudButton>
                    </MudStack>
                </MudStack>
            </MudForm>
        </MudContainer>
    </DialogContent>

    <DialogActions>
        <MudButton Color="Color.Primary" Disabled="!ModelForm.IsValid" Variant="Variant.Filled" OnClick="CreateApiScopeAsync">Создать</MudButton>
    </DialogActions>
</MudDialog>
